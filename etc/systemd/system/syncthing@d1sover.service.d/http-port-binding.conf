# These changes allow syncthing to bind its GUI to port 80; syncthing configuration then
# sets it up on 127.0.0.[not 0] IP with port 80, and with matching entry in hosts file,
# the GUI can be accessed via hostname syncthing.d1sover-linux.local, rather than IP and port.

[Service]
Group=%i
ExecStartPre=+/sbin/setcap 'cap_net_bind_service=+eip' /usr/bin/syncthing
ExecStopPost=+/sbin/setcap 'cap_net_bind_service=-eip' /usr/bin/syncthing

# Disabling some of the hardening in order to make the capability to bind to port 80 work
SystemCallArchitectures=
MemoryDenyWriteExecute=false
NoNewPrivileges=false